
<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Tutoriel Kata Karaté Ate-Waza-Kan</title>
<style>
    body {
      font-family: 'Noto Serif JP', serif;
      background-color: #f4f1ec;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background-color: #222;
      color: white;
      padding: 10px 0;
    }
    header img {
      height: 60px;
      vertical-align: middle;
    }
    header h1 {
      display: inline-block;
      margin: 0 10px;
      font-size: 24px;
      vertical-align: middle;
    }
    .frame {
      max-width: 800px;
      margin: 20px auto;
      border: 10px solid #8b0000;
      padding: 10px;
      background-color: #fff;
      box-shadow: 0 0 10px #aaa;
    }
    .video-wrapper {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%;
      background: #000;
    }
    .video-container {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      display: none;
    }
    .video-container.active {
      display: block;
    }
    .controls {
      margin: 10px 0;
    }
    .controls button, .controls select {
      margin: 5px;
      padding: 8px 12px;
      font-size: 16px;
    }
  </style>
<style>
#progress-container {
  width: 100%;
  max-width: 720px;
  margin: 10px auto;
  height: 10px;
  background-color: #ddd;
  border-radius: 5px;
  cursor: pointer;
}
#progress-bar {
  height: 100%;
  width: 0%;
  background-color: #b22222;
  border-radius: 5px;
  transition: width 0.2s ease;
}
</style></head>
<body>
<header>
<img alt="Logo" src="logo.png"/>
<h1>Tutoriel Kata Karaté Ate-Waza-Kan</h1>
</header>
<div class="frame">
<div class="controls">
<button onclick="switchView('player1')">Angle 1</button>
<button onclick="switchView('player2')">Angle 2</button>
<button onclick="switchView('player3')">Angle 3</button>
<button onclick="pauseAll()">⏸ Pause Globale</button>
<button onclick="playAll()">▶ Lecture Globale</button>
<label for="speedSelect">Vitesse :</label>
<select id="speedSelect" onchange="changeSpeed(this.value)">
<option value="0.5">0.5x</option>
<option selected="" value="1">1x</option>
<option value="1.5">1.5x</option>
<option value="2">2x</option>
</select>
</div>
<div class="video-wrapper">
<div class="video-container active" id="player1"></div>
<div class="video-container" id="player2"></div>
<div class="video-container" id="player3"></div>
</div><div id="progress-container"><div id="progress-bar"></div></div>
</div>
<script>
    let players = {};
    let currentPlayer = 'player1';
    let isPaused = false;
    let currentSpeed = 1;

    function onYouTubeIframeAPIReady() {
      players['player1'] = new YT.Player('player1', {
        videoId: 'ws9reT8X-EM',
        events: { 'onReady': onPlayerReady }
      });
      players['player2'] = new YT.Player('player2', {
        videoId: 'A1On5EBgzjI',
        events: { 'onReady': onPlayerReady }
      });
      players['player3'] = new YT.Player('player3', {
        videoId: 'KBG2dhFvkJo',
        events: { 'onReady': onPlayerReady }
      });
    }

    function onPlayerReady(event) {
      event.target.setPlaybackRate(currentSpeed);
      if (event.target.getIframe().id === currentPlayer && !isPaused) {
        event.target.playVideo();
      }
    }

    function switchView(targetId) {
      const currentTime = players[currentPlayer].getCurrentTime();
      players[currentPlayer].pauseVideo();
      document.getElementById(currentPlayer).classList.remove('active');
      document.getElementById(targetId).classList.add('active');
      players[targetId].seekTo(currentTime, true);
      players[targetId].setPlaybackRate(currentSpeed);
      if (!isPaused) {
        players[targetId].playVideo();
      }
      currentPlayer = targetId;
    }

    function pauseAll() {
      isPaused = true;
      for (let id in players) {
        players[id].pauseVideo();
      }
    }

    function playAll() {
      isPaused = false;
      const time = players[currentPlayer].getCurrentTime();
      for (let id in players) {
        players[id].seekTo(time, true);
        players[id].setPlaybackRate(currentSpeed);
        players[id].playVideo();
      }
    }

    function changeSpeed(rate) {
      currentSpeed = parseFloat(rate);
      for (let id in players) {
        players[id].setPlaybackRate(currentSpeed);
      }
    }

    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);
  </script>
<script>
let progressContainer = document.getElementById('progress-container');
let progressBar = document.getElementById('progress-bar');

function updateProgressBar() {
  if (players[currentPlayer] && typeof players[currentPlayer].getCurrentTime === 'function' && typeof players[currentPlayer].getDuration === 'function') {
    let currentTime = players[currentPlayer].getCurrentTime();
    let duration = players[currentPlayer].getDuration();
    if (duration > 0) {
      let percent = (currentTime / duration) * 100;
      progressBar.style.width = percent + '%';
    }
  }
  requestAnimationFrame(updateProgressBar);
}

progressContainer.addEventListener('click', function(e) {
  const rect = progressContainer.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const percent = x / rect.width;
  if (players[currentPlayer] && typeof players[currentPlayer].seekTo === 'function' && typeof players[currentPlayer].getDuration === 'function') {
    const duration = players[currentPlayer].getDuration();
    players[currentPlayer].seekTo(duration * percent, true);
  }
});

requestAnimationFrame(updateProgressBar);
</script></body>
</html>
